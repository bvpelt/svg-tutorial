(function (d3) {
  'use strict';

  const width = window.innerWidth;
  const height = window.innerHeight;

  const svg = d3.select('body') // d3 selection
    .append('svg')
    .attr('width', width)
    .attr('height', height);

  //
  // loose coupling + animation
  //
  let t = 0;
  const speed = 1000/60;
  setInterval(() => {
    const data = d3.range(15).map((d) => ({
      x: d * 60 + 50,
      y: 250 + Math.sin(d * 0.5 + t) * 220,
    }));

    //  const circles = svg
    //    .selectAll('circle')
    //    .data(data);

    //  const circlesEnter = circles  // enter new d3 elements -> dom
    //    .enter()
    //    .append('circle')
    //    .attr('r', 20);

    //  circles.merge(circlesEnter)   // update dom elements + only first time merge
    //    .attr('cx', (d) => d.x)
    //    .attr('cy', (d) => d.y);

    const circles = svg
      .selectAll('circle')
      .data(data)
      .join('circle')          // newer api sets
      .attr('r', 20)
      .attr('cx', (d) => d.x)
      .attr('cy', (d) => d.y);
    t = (t + 0.01) % speed;
  }, speed);

}(d3));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlbGVjdCwgcmFuZ2UgfSBmcm9tICdkMyc7XG5cbmNvbnN0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG5jb25zdCBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cbmNvbnN0IHN2ZyA9IHNlbGVjdCgnYm9keScpIC8vIGQzIHNlbGVjdGlvblxuICAuYXBwZW5kKCdzdmcnKVxuICAuYXR0cignd2lkdGgnLCB3aWR0aClcbiAgLmF0dHIoJ2hlaWdodCcsIGhlaWdodCk7XG5cbi8vXG4vLyBsb29zZSBjb3VwbGluZyArIGFuaW1hdGlvblxuLy9cbmxldCB0ID0gMDtcbmNvbnN0IHNwZWVkID0gMTAwMC82MDtcbnNldEludGVydmFsKCgpID0+IHtcbiAgY29uc3QgZGF0YSA9IHJhbmdlKDE1KS5tYXAoKGQpID0+ICh7XG4gICAgeDogZCAqIDYwICsgNTAsXG4gICAgeTogMjUwICsgTWF0aC5zaW4oZCAqIDAuNSArIHQpICogMjIwLFxuICB9KSk7XG5cbiAgLy8gIGNvbnN0IGNpcmNsZXMgPSBzdmdcbiAgLy8gICAgLnNlbGVjdEFsbCgnY2lyY2xlJylcbiAgLy8gICAgLmRhdGEoZGF0YSk7XG5cbiAgLy8gIGNvbnN0IGNpcmNsZXNFbnRlciA9IGNpcmNsZXMgIC8vIGVudGVyIG5ldyBkMyBlbGVtZW50cyAtPiBkb21cbiAgLy8gICAgLmVudGVyKClcbiAgLy8gICAgLmFwcGVuZCgnY2lyY2xlJylcbiAgLy8gICAgLmF0dHIoJ3InLCAyMCk7XG5cbiAgLy8gIGNpcmNsZXMubWVyZ2UoY2lyY2xlc0VudGVyKSAgIC8vIHVwZGF0ZSBkb20gZWxlbWVudHMgKyBvbmx5IGZpcnN0IHRpbWUgbWVyZ2VcbiAgLy8gICAgLmF0dHIoJ2N4JywgKGQpID0+IGQueClcbiAgLy8gICAgLmF0dHIoJ2N5JywgKGQpID0+IGQueSk7XG5cbiAgY29uc3QgY2lyY2xlcyA9IHN2Z1xuICAgIC5zZWxlY3RBbGwoJ2NpcmNsZScpXG4gICAgLmRhdGEoZGF0YSlcbiAgICAuam9pbignY2lyY2xlJykgICAgICAgICAgLy8gbmV3ZXIgYXBpIHNldHNcbiAgICAuYXR0cigncicsIDIwKVxuICAgIC5hdHRyKCdjeCcsIChkKSA9PiBkLngpXG4gICAgLmF0dHIoJ2N5JywgKGQpID0+IGQueSk7XG4gIHQgPSAodCArIDAuMDEpICUgc3BlZWQ7XG59LCBzcGVlZCk7XG4iXSwibmFtZXMiOlsic2VsZWN0IiwicmFuZ2UiXSwibWFwcGluZ3MiOiI7OztFQUVBLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7RUFDaEMsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQztBQUNsQztFQUNBLE1BQU0sR0FBRyxHQUFHQSxTQUFNLENBQUMsTUFBTSxDQUFDO0VBQzFCLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztFQUNoQixHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDO0VBQ3ZCLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUMxQjtFQUNBO0VBQ0E7RUFDQTtFQUNBLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUNWLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUM7RUFDdEIsV0FBVyxDQUFDLE1BQU07RUFDbEIsRUFBRSxNQUFNLElBQUksR0FBR0MsUUFBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTTtFQUNyQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUU7RUFDbEIsSUFBSSxDQUFDLEVBQUUsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHO0VBQ3hDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDTjtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7QUFDQTtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0EsRUFBRSxNQUFNLE9BQU8sR0FBRyxHQUFHO0VBQ3JCLEtBQUssU0FBUyxDQUFDLFFBQVEsQ0FBQztFQUN4QixLQUFLLElBQUksQ0FBQyxJQUFJLENBQUM7RUFDZixLQUFLLElBQUksQ0FBQyxRQUFRLENBQUM7RUFDbkIsS0FBSyxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQztFQUNsQixLQUFLLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUMzQixLQUFLLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQzVCLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksSUFBSSxLQUFLLENBQUM7RUFDekIsQ0FBQyxFQUFFLEtBQUssQ0FBQzs7OzsifQ==